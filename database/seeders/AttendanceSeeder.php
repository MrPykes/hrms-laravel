<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Attendance;
use App\Models\AttendanceLog;
use App\Models\Employee;
use Carbon\Carbon;

class AttendanceSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Get all employees
        $employees = Employee::all();

        // Define date range for October 2025
        $startDate = Carbon::create(2025, 10, 1);
        $endDate = Carbon::create(2025, 10, 31);

        // Loop through each day in October
        for ($date = $startDate; $date->lte($endDate); $date->addDay()) {
            // Skip weekends (optional)
            if ($date->isWeekend()) {
                continue;
            }

            foreach ($employees as $employee) {
                $attendance = Attendance::create([
                    'employee_id' => $employee->id,
                    'attendance_date' => $date->format('Y-m-d'),
                    'punch_in' => '09:00:00',
                    'punch_out' => '18:00:00',
                    'late_in' => 0.0,
                    'break_hours' => 1.0,
                    'overtime_hours' => 0.0,
                    'status' => 'on_time',
                ]);

                // Create sample punch logs
                $logs = [
                    ['punch_in' => '09:00:00', 'punch_out' => '12:00:00'],
                    ['punch_in' => '13:00:00', 'punch_out' => '18:00:00'],
                ];

                foreach ($logs as $log) {
                    AttendanceLog::create([
                        'attendance_id' => $attendance->id,
                        'punch_in' => $log['punch_in'],
                        'punch_out' => $log['punch_out'],
                    ]);
                }
            }
        }
        $this->timesheets();
    }


    public function timesheets(){
         $rows = [
            // name, date, punch_in, punch_out
            ['12','2025-11-17','07:22:00','17:00:00'],
            ['9','2025-11-17','07:44:00','17:02:00'],
            ['7','2025-11-17','07:49:00','17:07:00'],
            ['10','2025-11-17','07:50:00','17:02:00'],
            ['11','2025-11-17','07:48:00','17:00:00'],
            ['13','2025-11-17','07:54:00','17:08:00'],
            ['5','2025-11-17','07:57:00','17:00:00'],
            ['8','2025-11-17','08:00:00','17:02:00'],
            ['4','2025-11-17','08:05:00','17:03:00'],
            ['3','2025-11-17','08:15:00','17:00:00'],
            ['6','2025-11-17','08:20:00','17:11:00'],

            ['12','2025-11-18','07:24:00','17:00:00'],
            ['9','2025-11-18','07:50:00','17:02:00'],
            ['10','2025-11-18','07:48:00','17:02:00'],
            ['5','2025-11-18','07:52:00','17:01:00'],
            ['13','2025-11-18','07:52:00','17:00:00'],
            ['11','2025-11-18','07:54:00','17:01:00'],
            ['7','2025-11-18','07:59:00','17:01:00'],
            ['4','2025-11-18','07:58:00','17:01:00'],
            ['6','2025-11-18','07:57:00','17:11:00'],
            ['8','2025-11-18','08:19:00','17:00:00'],

            ['12','2025-11-19','07:15:00','17:01:00'],
            ['7','2025-11-19','07:54:00','17:01:00'],
            ['13','2025-11-19','07:56:00','17:04:00'],
            ['4','2025-11-19','07:50:00','17:04:00'],
            ['5','2025-11-19','08:00:00','17:01:00'],
            ['8','2025-11-19','08:08:00','17:03:00'],
            ['6','2025-11-19','08:13:00','17:06:00'],
            ['3','2025-11-19','07:57:00','17:00:00'],
            ['9','2025-11-19','08:19:00','17:02:00'],
            ['11','2025-11-19','07:54:00','17:02:00'],

            ['7','2025-11-20','07:16:00','17:02:00'],
            ['9','2025-11-20','07:54:00','17:01:00'],
            ['5','2025-11-20','07:55:00','17:01:00'],
            ['13','2025-11-20','07:57:00','17:06:00'],
            ['11','2025-11-20','07:58:00','17:10:00'],
            ['8','2025-11-20','08:08:00','17:09:00'],
            ['4','2025-11-20','08:05:00','17:02:00'],
            ['6','2025-11-20','08:18:00','17:23:00'],
            ['3','2025-11-20','08:20:00','17:00:00'],
            ['12','2025-11-20','07:16:00','17:00:00'],

            ['8','2025-11-21','07:18:00','17:05:00'],
            ['12','2025-11-21','07:28:00','17:01:00'],
            ['7','2025-11-21','07:35:00','17:03:00'],
            ['5','2025-11-21','07:52:00','17:00:00'],
            ['13','2025-11-21','07:57:00','17:03:00'],
            ['6','2025-11-21','07:54:00','17:07:00'],
            ['4','2025-11-21','07:56:00','17:00:00'],
            ['10','2025-11-21','08:02:00','17:03:00'],
            ['9','2025-11-21','08:07:00','17:00:00'],
            ['11','2025-11-21','08:54:00','17:02:00'],

            ['12','2025-11-24','07:24:00','17:06:00'],
            ['8','2025-11-24','07:31:00','17:02:00'],
            ['4','2025-11-24','07:55:00','17:00:00'],
            ['11','2025-11-24','07:50:00','17:03:00'],
            ['13','2025-11-24','07:58:00','17:04:00'],
            ['9','2025-11-24','07:59:00','17:01:00'],
            ['7','2025-11-24','08:00:00','17:15:00'],
            ['6','2025-11-24','08:23:00','17:08:00'],
            ['10','2025-11-24','12:58:00','17:06:00'],

            ['12','2025-11-25','07:20:00','17:02:00'],
            ['7','2025-11-25','07:30:00','17:42:00'],
            ['8','2025-11-25','07:59:00','17:04:00'],
            ['9','2025-11-25','07:58:00','17:02:00'],
            ['11','2025-11-25','07:55:00','17:04:00'],
            ['10','2025-11-25','07:52:00','17:03:00'],
            ['5','2025-11-25','08:17:00','17:02:00'],
            ['6','2025-11-25','08:11:00','17:00:00'], // auto 17:00
            ['4','2025-11-25','07:50:00','17:08:00'],

            ['7','2025-11-26','07:30:00','17:03:00'],
            ['12','2025-11-26','07:30:00','17:05:00'],
            ['5','2025-11-26','07:53:00','17:00:00'],
            ['8','2025-11-26','07:54:00','17:08:00'],
            ['10','2025-11-26','07:51:00','17:05:00'],
            ['13','2025-11-26','07:57:00','17:04:00'],
            ['6','2025-11-26','07:59:00','17:06:00'],
            ['9','2025-11-26','08:10:00','17:03:00'],
            ['3','2025-11-26','08:05:00','17:00:00'], // auto 17:00
            ['11','2025-11-26','07:46:00','17:05:00'],
            ['4','2025-11-26','07:55:00','17:03:00'],

            ['12','2025-11-27','07:12:00','17:01:00'],
            ['7','2025-11-27','07:47:00','17:02:00'],
            ['8','2025-11-27','07:41:00','17:09:00'],
            ['5','2025-11-27','07:50:00','17:02:00'],
            ['13','2025-11-27','07:56:00','17:03:00'],
            ['4','2025-11-27','07:56:00','17:07:00'],
            ['10','2025-11-27','08:05:00','17:03:00'],
            ['6','2025-11-27','08:08:00','17:04:00'],
            ['11','2025-11-27','07:46:00','17:05:00'],

            ['12','2025-11-28','07:32:00','17:00:00'], // auto 17:00
            ['8','2025-11-28','07:38:00','17:15:00'],
            ['10','2025-11-28','07:40:00','17:05:00'],
            ['7','2025-11-28','07:46:00','17:01:00'],
            ['5','2025-11-28','07:50:00','17:01:00'],
            ['13','2025-11-28','07:54:00','17:18:00'],
            ['9','2025-11-28','08:00:00','17:01:00'],
            ['3','2025-11-28','08:04:00','17:00:00'], // auto 17:00
            ['6','2025-11-28','07:58:00','17:10:00'],
            ['4','2025-11-28','08:00:00','17:06:00'],
        ];

        foreach ($rows as [$id,$date,$in,$out]) {
            $employee = Employee::where('id',$id)->first();
            // dd($attendance);
                $employee->punchInOutAttendance([
                    'attendance_date' => $date,
                    'punch_in' => $in,
                ]);

                $employee->punchInOutAttendance([
                    'attendance_date' => $date,
                    'punch_out' => $out,
                    'employee_id' => $employee->id,
                ]);
        }
    }
}
